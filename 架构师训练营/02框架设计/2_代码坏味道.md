# 框架设计

## 2.2 设计臭味：糟糕的代码有哪些特点？

软件设计的最终目的，是使软件达到“强内聚、松耦合”，从而使软件：

- 易扩展－ 易于增加新的功能
- 更强壮－ 不容易被粗心的程序员破坏
- 可移植－ 能够在多样的环境下运行
- 更简单－ 容易理解、容易维护

与之相反，一个“不好的”软件，会发出如下“臭味”：
- 僵硬－ 不易改变。
- 脆弱－ 只想改A，结果B 被意外破坏。
- 不可移植－ 不能适应环境的变化。
- 导致误用的陷阱－ 做错误的事比做正确的事更容易，引诱程序员破坏原有的设计。
- 晦涩－ 代码难以理解。
- 过度设计、copy-paste 代码。

僵化性（Rigidity）：很难对系统进行改动，因为每个改动都会迫使许多对系统其他部分的改动。

- 如果单一的改动会导致依赖关系的模块中的连锁改动，那么设计就是僵化的，必须要改动的模块越多，设计就越僵化。

脆弱性（Fragility）：对系统的改动会导致系统中和改动的地方无关的许多地方出现问题。

- 出现新问题的地方与改动的地方没有概念上的关联。要修正这些问题又会引出更多的问题，从而使开发团队就像一只不停追逐自己尾巴的狗一样。

牢固性（Immobility）：很难解开系统的纠结，使之成为一些可在其他系统中重用的组件。
- 设计中包含了对其他系统有用的部分，而把这些部分从系统中分离出来所需的努力和风险是巨大的。

粘滞性（Viscosity）：做正确的事情比做错误的事情要困难。
- 面临一个改动的时候，开发人员常常会发现会有多种改动的方法。有的方法会保持系统原来的设计，而另外一些则会破坏设计，当那些可以保持系统设计的方法比那些破坏设计的方法跟难应用是，就表明设计具有高的粘滞性，作错误的事情就很容易。

不必要的复杂性（Needless Complexity）：设计中包含有不具任何直接好处的基础结构

- 如果设计中包含有当前没有用的组成部分，他就含有不必要的复杂性。当开发人员预测需求的变化，并在软件中放置了处理那些潜在变化的代码时，常常会出现这种情况。

不必要的重复（Needless Repetition）：设计中包含有重复的结构，而该重复的结构本可以使用单一的抽象进行统一。
- 当copy，cut，paste 编程的时候，这种情况就会发生。

晦涩性（Opacity）：很难阅读、理解。没有很好的表现出意图。
- 代码可以用清晰、富有表现力的方式编写，也可以用晦涩、费解的方式编写。一般说来，随着时间的推移，代码会变得越来越晦涩。
